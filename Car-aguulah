<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car-–ê–≥—É—É–ª–∞—Ö ‚Äî 0 –≠—Ä—Å–¥—ç–ª, –•—è–∑–≥–∞–∞—Ä–≥“Ø–π –ê—à–∏–≥</title>
    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* GitHub Dark Mode Background */
            color: #c9d1d9; /* Light gray text */
        }
        .header-bg {
            background-image: linear-gradient(to right, #1f2937, #111827);
        }
        .card-bg {
            background-color: #161b22; /* Slightly lighter dark background for cards */
        }
        .shadow-neon {
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.5), 0 0 20px rgba(0, 191, 255, 0.3);
        }
        .ref-id-box {
            letter-spacing: 0.25em;
        }
        .loading-animation {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #3b82f6;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen">
    
    <!-- Application Notification Box -->
    <div id="app-notification" class="fixed bottom-4 right-4 bg-blue-600/90 text-white p-4 rounded-lg shadow-xl 
        transition-all duration-300 transform opacity-0 scale-95 z-50 pointer-events-none">
        –õ–∏–Ω–∫ –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö—É—É–ª–∞–≥–¥–ª–∞–∞!
    </div>

    <!-- Firebase Initialization and Logic Script -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, setLogLevel, doc, getDoc, setDoc, collection, query, onSnapshot, where } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase Log Level for Debugging
        setLogLevel('Debug');

        // Global Variables
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-car-aguulah-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db;
        let auth;
        let userId = 'Guest';
        let currentUserRefId = null;

        const getSalesMemberDocPath = (uid) => doc(db, 'artifacts', appId, 'users', uid, 'sales_members', uid);
        const getPublicCarCollectionRef = () => collection(db, 'artifacts', appId, 'public', 'data', 'cars');
        const getPublicSalesCollectionRef = () => collection(db, 'artifacts', appId, 'public', 'data', 'sales');


        const generateRefId = () => {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            const length = 6;
            for (let i = 0; i < length; i++) {
                result += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            return result;
        };
        
        // --- UTILITY FUNCTIONS ---

        const showNotification = (message, isError = false) => {
            const notification = document.getElementById('app-notification');
            if (!notification) return;
            
            notification.textContent = message;
            
            notification.classList.remove('opacity-0', 'scale-95', 'bg-red-600/90', 'bg-blue-600/90');
            
            if (isError) {
                notification.classList.add('opacity-100', 'scale-100', 'bg-red-600/90');
            } else {
                notification.classList.add('opacity-100', 'scale-100', 'bg-blue-600/90');
            }

            setTimeout(() => {
                notification.classList.remove('opacity-100', 'scale-100', 'bg-red-600/90', 'bg-blue-600/90');
                notification.classList.add('opacity-0', 'scale-95');
            }, 3000);
        };

        /**
         * –ë–æ—Ä–ª—É—É–ª–∞–ª—Ç—ã–Ω –ª–∏–Ω–∫–∏–π–≥ “Ø“Ø—Å–≥—ç—ç–¥ Clipboard —Ä—É—É —Ö—É—É–ª–∞—Ö
         */
        window.generateAndCopyLink = (refId, carId) => {
            if (!refId || !carId) {
                showNotification("–ê–ª–¥–∞–∞: Ref ID —ç—Å–≤—ç–ª Car ID –¥—É—Ç—É—É –±–∞–π–Ω–∞.", true);
                return;
            }
            
            // NOTE: –≠–Ω—ç –Ω—å —Å–∏–º—É–ª—è—Ü –ª–∏–Ω–∫ –±”©–≥”©”©–¥ —Ç–∞–Ω—ã Ref ID, Car ID-–≥ –∞–≥—É—É–ª–Ω–∞.
            const baseUrl = "https://car-aguulah.mn/sale";
            const shareLink = `${baseUrl}?ref=${refId}&car=${carId}`;
            
            // Clipboard-–¥ —Ö—É—É–ª–∞—Ö (iFrame-–¥ –∞–∂–∏–ª–ª–∞—Ö –±–æ–ª–æ–º–∂—Ç–æ–π —Ö—É—É—á–∏–Ω –∞—Ä–≥–∞)
            try {
                const tempInput = document.createElement('input');
                tempInput.value = shareLink;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);

                showNotification(`‚úÖ –õ–∏–Ω–∫ —Ö—É—É–ª–∞–≥–¥–ª–∞–∞: ${shareLink.substring(0, 30)}...`);
            } catch (err) {
                showNotification("–ê–ª–¥–∞–∞: –õ–∏–Ω–∫ —Ö—É—É–ª–∞—Ö –±–æ–ª–æ–º–∂–≥“Ø–π.", true);
                console.error('–õ–∏–Ω–∫ —Ö—É—É–ª–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞:', err);
            }
        };


        // --- INVENTORY RENDER LOGIC ---

        const renderCars = (cars) => {
            const inventoryList = document.getElementById('inventory-list');
            if (!inventoryList) return;

            const isRegistered = !!currentUserRefId;

            if (cars.length === 0) {
                inventoryList.innerHTML = '<p class="text-center text-gray-500 py-10">–û–¥–æ–æ–≥–æ–æ—Ä –Ω–∏–π–ª“Ø“Ø–ª—ç–≥—á–¥—ç—ç—Å –∏—Ä—Å—ç–Ω –º–∞—à–∏–Ω –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞.</p>';
                return;
            }

            inventoryList.innerHTML = cars.map(car => {
                const linkButton = isRegistered ? `
                    <button class="mt-4 w-full bg-pink-600 hover:bg-pink-700 text-white font-semibold py-2 rounded-lg transition duration-200"
                            onclick="window.generateAndCopyLink('${currentUserRefId}', '${car.id}')">
                        üîó –ë–æ—Ä–ª—É—É–ª–∞–ª—Ç—ã–Ω –õ–∏–Ω–∫ –•—É—É–ª–∞—Ö
                    </button>
                ` : `
                    <button class="mt-4 w-full bg-gray-600 text-gray-400 font-semibold py-2 rounded-lg cursor-not-allowed" 
                            onclick="showNotification('–ë–æ—Ä–ª—É—É–ª–∞–ª—Ç—ã–Ω –ª–∏–Ω–∫ “Ø“Ø—Å–≥—ç—Ö–∏–π–Ω —Ç—É–ª–¥ –±“Ø—Ä—Ç–≥—ç–ª—ç—ç –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–Ω–∞ —É—É.', true)">
                        –≠—Ä—Ö –∞–≤–∞–∞–≥“Ø–π
                    </button>
                `;

                return `
                    <div class="card-bg p-6 rounded-xl shadow-md border border-gray-700 hover:border-pink-500 transition duration-300">
                        <h5 class="text-xl font-bold text-white mb-2">${car.make} ${car.model} (${car.year})</h5>
                        <p class="text-2xl font-extrabold text-blue-400 mb-3">‚ÇÆ${car.price.toLocaleString('en-US')}</p>
                        <p class="text-sm text-gray-400">–ë–∞–π—Ä—à–∏–ª: ${car.location}</p>
                        <p class="text-sm text-gray-400">Provider ID: ${car.providerId}</p>
                        <span class="inline-block mt-3 text-xs font-semibold px-3 py-1 rounded-full ${car.status === 'Available' ? 'bg-green-900/50 text-green-400' : 'bg-red-900/50 text-red-400'}">
                            ${car.status === 'Available' ? '–ë—ç–ª—ç–Ω' : '–ó–∞—Ä–∞–≥–¥—Å–∞–Ω'}
                        </span>
                        ${linkButton}
                    </div>
                `;
            }).join('');
        };
        
        const setupInventoryListener = () => {
            const carsCollectionRef = getPublicCarCollectionRef();
            
            onSnapshot(carsCollectionRef, (snapshot) => {
                const cars = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                renderCars(cars);
                
                // Mock Car Data Initialization (Run only once if no data exists)
                if (cars.length === 0) {
                    console.log("Mock Car Data “Ø“Ø—Å–≥—ç–∂ –±–∞–π–Ω–∞...");
                    setDoc(doc(carsCollectionRef, "car_1"), { make: "Toyota", model: "Land Cruiser 300", year: 2024, price: 350000000, location: "UB", providerId: "ProvA", status: "Available" });
                    setDoc(doc(carsCollectionRef, "car_2"), { make: "Lexus", model: "LX 600", year: 2023, price: 420000000, location: "UB", providerId: "ProvB", status: "Available" });
                    setDoc(doc(carsCollectionRef, "car_3"), { make: "Hyundai", model: "Palisade", year: 2022, price: 120000000, location: "Darkhan", providerId: "ProvC", status: "Available" });
                    // Mock Sale Data Initialization (Example of a sale tied to a Ref ID for demonstration)
                    const salesCollectionRef = getPublicSalesCollectionRef();
                    setDoc(doc(salesCollectionRef, "sale_mock_1"), { carMake: "Toyota", carModel: "Prado", carPrice: 150000000, salesMemberRefId: "DEMO1A", commissionRate: 0.05, commissionEarned: 7500000, saleDate: new Date().toISOString(), status: "Completed" });
                    setDoc(doc(salesCollectionRef, "sale_mock_2"), { carMake: "Lexus", carModel: "RX", carPrice: 90000000, salesMemberRefId: "DEMO1A", commissionRate: 0.07, commissionEarned: 6300000, saleDate: new Date(Date.now() - 86400000).toISOString(), status: "Completed" });
                }
            }, (error) => {
                console.error("–ú–∞—à–∏–Ω—ã –Ω”©”©—Ü–∏–π–≥ —Ç–∞—Ç–∞–∂ —á–∞–¥—Å–∞–Ω–≥“Ø–π:", error);
                document.getElementById('inventory-list').innerHTML = '<p class="text-center text-red-400 py-10">”®–≥”©–≥–¥”©–ª —Ç–∞—Ç–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞.</p>';
            });
        };

        // --- SALES TRACKER LOGIC ---

        const renderSales = (sales) => {
            const salesList = document.getElementById('sales-list');
            const totalSalesDisplay = document.getElementById('total-sales-earned');
            if (!salesList || !totalSalesDisplay) return;

            if (sales.length === 0) {
                salesList.innerHTML = '<p class="text-center text-gray-500 py-10">–¢–∞–Ω—ã Ref ID-–≥–æ–æ—Ä —Ö–∏–π–≥–¥—Å—ç–Ω –±–æ—Ä–ª—É—É–ª–∞–ª—Ç –æ–¥–æ–æ–≥–æ–æ—Ä –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞.</p>';
                totalSalesDisplay.textContent = '‚ÇÆ0';
                return;
            }

            let totalEarned = 0;
            salesList.innerHTML = sales.map(sale => {
                totalEarned += sale.commissionEarned;
                return `
                    <li class="p-4 card-bg rounded-lg flex justify-between items-center border-l-4 border-green-500 mb-2">
                        <div>
                            <p class="text-lg font-semibold text-white">${sale.carModel} (${sale.carMake}) - ‚ÇÆ${sale.carPrice.toLocaleString('en-US')}</p>
                            <p class="text-sm text-gray-400">–û–≥–Ω–æ–æ: ${new Date(sale.saleDate).toLocaleDateString()}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-bold text-green-400">‚ÇÆ${sale.commissionEarned.toLocaleString('en-US')}</p>
                            <p class="text-xs text-gray-500">${(sale.commissionRate * 100).toFixed(0)}% –ö–æ–º–∏—Å—Å</p>
                        </div>
                    </li>
                `;
            }).join('');
            
            totalSalesDisplay.textContent = '‚ÇÆ' + totalEarned.toLocaleString('en-US');
        };

        const setupSalesListener = (userRefId) => {
            const salesCollectionRef = getPublicSalesCollectionRef();
            const q = query(salesCollectionRef, where("salesMemberRefId", "==", userRefId));
            
            onSnapshot(q, (snapshot) => {
                const sales = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                renderSales(sales);
            }, (error) => {
                console.error("–ë–æ—Ä–ª—É—É–ª–∞–ª—Ç—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª —Ç–∞—Ç–∞–∂ —á–∞–¥—Å–∞–Ω–≥“Ø–π:", error);
                document.getElementById('sales-list').innerHTML = '<p class="text-center text-red-400 py-10">”®–≥”©–≥–¥”©–ª —Ç–∞—Ç–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞.</p>';
            });
        };
        
        // --- REGISTRATION LOGIC ---

        const updateRegistrationUI = (status, refId = null) => {
            const registrationCard = document.getElementById('registration-card');
            const statusDisplay = document.getElementById('registration-status');
            const refIdDisplay = document.getElementById('ref-id-display');
            const refIdBox = document.getElementById('ref-id-box');
            const registerButton = document.getElementById('register-button');
            const salesTrackerSection = document.getElementById('sales-tracker');

            salesTrackerSection.classList.add('hidden');
            registerButton.classList.add('hidden');
            refIdBox.classList.add('hidden');
            statusDisplay.classList.remove('text-yellow-400', 'text-green-400');
            registrationCard.classList.remove('animate-pulse');

            if (status === 'loading') {
                statusDisplay.innerHTML = '<div class="loading-animation inline-block mr-2"></div> –¢”©–ª–≤–∏–π–≥ —à–∞–ª–≥–∞–∂ –±–∞–π–Ω–∞...';
                statusDisplay.classList.add('text-yellow-400');
                registrationCard.classList.add('animate-pulse');
            } else if (status === 'registered') {
                statusDisplay.innerHTML = '‚úÖ **–ê–º–∂–∏–ª—Ç—Ç–∞–π –ë“Ø—Ä—Ç–≥“Ø“Ø–ª—Å—ç–Ω.** –¢–∞ –±–æ–ª –∞–ª–±–∞–Ω —ë—Å–Ω—ã Sales Member!';
                statusDisplay.classList.add('text-green-400');
                refIdDisplay.textContent = refId;
                refIdBox.classList.remove('hidden');
                salesTrackerSection.classList.remove('hidden');
                currentUserRefId = refId;
                setupSalesListener(refId); 
                renderCars(document.getElementById('inventory-list').querySelectorAll('.card-bg')); // Refresh cars to show buttons
            } else if (status === 'unregistered') {
                statusDisplay.textContent = '‚ùå –¢–∞ –±“Ø—Ä—Ç–≥—ç–ª–≥“Ø–π –±–∞–π–Ω–∞. –≠—Ä—Ö—ç—ç –∞–≤–∞–∞–¥, –±–æ—Ä–ª—É—É–ª–∞–ª—Ç–∞–∞ —ç—Ö–ª“Ø“Ø–ª—ç—ç—Ä—ç–π.';
                statusDisplay.classList.add('text-yellow-400');
                registerButton.classList.remove('hidden');
                currentUserRefId = null;
                // If there were cars rendered before, re-render them without the link button
                const currentCars = Array.from(document.getElementById('inventory-list').children).map(el => ({ 
                    id: el.querySelector('button') ? el.querySelector('button').onclick.toString().match(/'(car_\d+)'/)?.[1] : null, 
                    make: el.querySelector('h5')?.textContent.split(' ')[0],
                    model: el.querySelector('h5')?.textContent.split(' ')[1],
                    year: el.querySelector('h5')?.textContent.match(/\((\d{4})\)/)?.[1],
                    price: parseFloat(el.querySelector('p:nth-child(3)')?.textContent.replace(/[^0-9.]/g, '')),
                    location: el.querySelector('p:nth-child(4)')?.textContent.split(': ')[1],
                    providerId: el.querySelector('p:nth-child(5)')?.textContent.split(': ')[1],
                    status: el.querySelector('span')?.textContent === '–ë—ç–ª—ç–Ω' ? 'Available' : 'Sold',
                })).filter(car => car.id);
                if (currentCars.length > 0) renderCars(currentCars);
            }
        };
        
        const checkUserStatus = async (uid) => {
            updateRegistrationUI('loading');
            try {
                const userDocRef = getSalesMemberDocPath(uid);
                const docSnap = await getDoc(userDocRef);

                if (docSnap.exists()) {
                    const data = docSnap.data();
                    if (data.isRegistered) {
                        updateRegistrationUI('registered', data.refId);
                        return;
                    }
                }
                updateRegistrationUI('unregistered');
            } catch (error) {
                console.error("–¢”©–ª”©–≤ —à–∞–ª–≥–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞:", error);
                updateRegistrationUI('unregistered'); 
            }
        };

        window.registerSalesMember = async () => {
            const button = document.getElementById('register-button');
            const originalText = button.textContent;
            button.disabled = true;
            button.textContent = '–ë“Ø—Ä—Ç–≥“Ø“Ø–ª–∂ –±–∞–π–Ω–∞...';
            
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            try {
                // Mock Sales-“Ø“Ø–¥—Ç—ç–π —Ö–æ–ª–±–æ–≥–¥–æ–∂ –±–∞–π–≥–∞–∞–≥ —Ö–∞—Ä—É—É–ª–∞—Ö—ã–Ω —Ç—É–ª–¥ "DEMO1A" Ref ID-–≥ –∞—à–∏–≥–ª–∞–∂ –±–∞–π–Ω–∞.
                const newRefId = "DEMO1A"; 
                const userDocRef = getSalesMemberDocPath(userId);
                
                const registrationData = {
                    userId: userId,
                    refId: newRefId,
                    isRegistered: true,
                    registrationDate: new Date().toISOString(),
                    feePaid: 250000,
                    tierLevel: 2, 
                };
                
                await setDoc(userDocRef, registrationData);
                
                updateRegistrationUI('registered', newRefId);
                showNotification(`‚úÖ –ë“Ø—Ä—Ç–≥—ç–ª –∞–º–∂–∏–ª—Ç—Ç–∞–π. –¢–∞–Ω—ã Ref ID: ${newRefId}`);

            } catch (error) {
                console.error("–ë“Ø—Ä—Ç–≥—ç–ª–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞:", error);
                showNotification("–ë“Ø—Ä—Ç–≥—ç–ª–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞.", true);
            } finally {
                button.disabled = false;
                button.textContent = originalText;
            }
        };

        const initFirebase = async () => {
            if (!firebaseConfig) {
                document.getElementById('firebase-status').textContent = '–ê–ª–¥–∞–∞: Firebase —Ö–æ–ª–±–æ–ª—Ç–≥“Ø–π.';
                return;
            }

            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                document.getElementById('firebase-status').textContent = '–°–∏—Å—Ç–µ–º –±—ç–ª—ç–Ω. (Firebase Connected)';
                setupInventoryListener(); 

                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        document.getElementById('user-id-display').textContent = `–•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω ID: ${userId}`;
                        document.getElementById('firebase-status').classList.remove('text-red-400');
                        document.getElementById('firebase-status').classList.add('text-green-400');
                        checkUserStatus(userId); 
                    } else {
                        userId = 'Anonymous-' + crypto.randomUUID();
                        document.getElementById('user-id-display').textContent = `–•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω ID: ${userId} (–¢“Ø—Ä –∑—É—É—Ä—ã–Ω)`;
                        updateRegistrationUI('unregistered');
                    }
                });

            } catch (error) {
                console.error("Firebase —Ö–æ–ª–±–æ–ª—Ç–æ–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞:", error);
                document.getElementById('firebase-status').textContent = `–ê–ª–¥–∞–∞: ${error.message}`;
                document.getElementById('firebase-status').classList.remove('text-green-400');
                document.getElementById('firebase-status').classList.add('text-red-400');
            }
        };

        window.onload = initFirebase;
    </script>
    
    <!-- Header/Navigation Bar -->
    <header class="header-bg p-4 sticky top-0 z-10 border-b border-blue-600 shadow-xl">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-extrabold text-blue-400 tracking-wider">
                <span class="text-white">üöó</span> Car-–ê–≥—É—É–ª–∞—Ö
            </h1>
            <nav class="hidden md:flex space-x-6 text-sm font-medium">
                <a href="#inventory" class="hover:text-blue-400 transition duration-300">–ú–∞—à–∏–Ω—ã –ù”©”©—Ü</a>
                <a href="#registration-status-section" class="hover:text-blue-400 transition duration-300">–ë“Ø—Ä—Ç–≥—ç–ª</a>
                <a href="#sales-tracker" class="hover:text-blue-400 transition duration-300">–ë–æ—Ä–ª—É—É–ª–∞–ª—Ç—ã–Ω –•—è–Ω–∞–ª—Ç</a>
                <a href="#provider" class="hover:text-blue-400 transition duration-300">–ù–∏–π–ª“Ø“Ø–ª—ç–≥—á</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section - Core Philosophy -->
    <section id="philosophy" class="text-center py-20 px-4 md:py-32 bg-gray-900 border-b border-gray-700">
        <div class="max-w-4xl mx-auto">
            <p class="text-sm font-semibold text-blue-400 uppercase tracking-widest mb-3">Shared Economic System in Automotive</p>
            <h2 class="text-5xl md:text-7xl font-extrabold leading-tight text-white mb-6">
                <span class="shadow-neon px-2 rounded-lg">0 –≠–†–°–î–≠–õ,</span> <br class="block md:hidden"> –•–Ø–ó–ì–ê–ê–†–ì“Æ–ô –ê–®–ò–ì.
            </h2>
            <p class="text-xl md:text-2xl text-gray-400 mb-8 max-w-2xl mx-auto">
                –•“Ø—Å—Å—ç–Ω —Ö—ç–Ω –±“Ø—Ö—ç–Ω —è–º–∞—Ä —á —Ö”©—Ä”©–Ω–≥”© —à–∞–∞—Ä–¥–ª–∞–≥–∞–≥“Ø–π–≥—ç—ç—Ä **–æ–Ω–ª–∞–π–Ω–∞–∞—Ä –Ω—ç–º—ç–ª—Ç –æ—Ä–ª–æ–≥–æ** –æ–ª–æ—Ö –±–æ–ª–æ–º–∂—Ç–æ–π —Å–∏—Å—Ç–µ–º.
            </p>
            <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                <button onclick="document.getElementById('registration-status-section').scrollIntoView({behavior: 'smooth'})" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-xl transition duration-300 transform hover:scale-105 shadow-lg shadow-blue-500/50">
                    –û–¥–æ–æ –ù—ç–≥–¥—ç—Ö
                </button>
            </div>
        </div>
    </section>

    <!-- Registration Status Section -->
    <section id="registration-status-section" class="py-16 px-4 md:py-24 max-w-4xl mx-auto">
        <h3 class="text-4xl font-bold text-center mb-12 text-white">üîë –ë“Ø—Ä—Ç–≥—ç–ª–∏–π–Ω –¢”©–ª”©–≤ –±–∞ Ref ID</h3>
        
        <div id="registration-card" class="card-bg p-8 rounded-2xl shadow-lg border border-blue-600">
            <p class="text-lg font-semibold mb-4 text-center" id="registration-status">
                <!-- Status will be updated by JS -->
            </p>

            <!-- Ref ID Display Box (Hidden by default) -->
            <div id="ref-id-box" class="hidden bg-gray-800 p-6 rounded-xl text-center mt-4 border border-green-500">
                <p class="text-lg text-gray-400 mb-2">–¢–∞–Ω—ã –ë–æ—Ä–ª—É—É–ª–∞–ª—Ç—ã–≥ –•—è–Ω–∞—Ö ID (Ref ID):</p>
                <code id="ref-id-display" class="text-5xl font-extrabold text-green-400 ref-id-box select-all">
                    ...
                </code>
                <p class="text-sm text-gray-500 mt-2">–≠–Ω—ç—Ö“Ø“Ø ID-–≥ –∞—à–∏–≥–ª–∞–Ω –±–æ—Ä–ª—É—É–ª–∞–ª—Ç—ã–Ω –ª–∏–Ω–∫, —Å—É–≤–≥–∞–∞ “Ø“Ø—Å–≥—ç—ç—Ä—ç–π.</p>
            </div>

            <!-- Registration Button (Hidden by default) -->
            <button id="register-button" onclick="registerSalesMember()" class="hidden w-full bg-yellow-600 hover:bg-yellow-700 text-gray-900 font-bold py-3 mt-6 rounded-xl transition duration-300 transform hover:scale-[1.02]">
                ‚ÇÆ250,000 —Ç”©–ª”©–Ω, –ë–æ—Ä–ª—É—É–ª–∞–≥—á–∏–π–Ω –≠—Ä—Ö –ê–≤–∞—Ö (–¢”©–ª–±”©—Ä–∏–π–Ω –°–∏–º—É–ª—è—Ü)
            </button>
        </div>
    </section>

    <!-- Sales Tracking Section (Hidden until registered) -->
    <section id="sales-tracker" class="py-16 px-4 md:py-24 max-w-7xl mx-auto hidden bg-gray-900 border-t border-gray-700">
        <h3 class="text-4xl font-bold text-center mb-12 text-white">üí∞ –ë–æ—Ä–ª—É—É–ª–∞–ª—Ç—ã–Ω –•—è–Ω–∞–ª—Ç –±–∞ –û—Ä–ª–æ–≥–æ</h3>
        
        <div class="grid md:grid-cols-3 gap-8">
            <!-- Total Earnings Card -->
            <div class="card-bg p-6 rounded-2xl shadow-neon border border-blue-600 md:col-span-1 text-center">
                <p class="text-lg text-gray-400 uppercase tracking-wider mb-2">–ù–∏–π—Ç –û–ª—Å–æ–Ω –û—Ä–ª–æ–≥–æ</p>
                <p id="total-sales-earned" class="text-5xl font-extrabold text-yellow-300">
                    ‚ÇÆ0
                </p>
                <p class="text-sm text-gray-500 mt-2">–ö–æ–º–∏—Å—Å–æ–æ—Ä –æ–ª—Å–æ–Ω –Ω–∏–π—Ç –¥“Ø–Ω</p>
            </div>
            
            <!-- Sales List -->
            <div class="card-bg p-6 rounded-2xl shadow-lg border border-gray-700 md:col-span-2">
                <h4 class="text-2xl font-bold text-white mb-4">–•–∏–π–≥–¥—Å—ç–Ω –ë–æ—Ä–ª—É—É–ª–∞–ª—Ç—É—É–¥</h4>
                <ul id="sales-list" class="space-y-3">
                    <!-- Sales items will be rendered here by JS -->
                    <p class="text-center text-gray-500 py-10">–¢“Ø—Ä —Ö“Ø–ª—ç—ç–Ω—ç “Ø“Ø, ”©–≥”©–≥–¥”©–ª —Ç–∞—Ç–∞–∂ –±–∞–π–Ω–∞...</p>
                </ul>
            </div>
        </div>
    </section>

    <!-- Car Inventory Section -->
    <section id="inventory" class="py-16 px-4 md:py-24 max-w-7xl mx-auto">
        <h3 class="text-4xl font-bold text-center mb-12 text-white">üì¶ Car-–ê–≥—É—É–ª–∞—Ö—ã–Ω –ù”©”©—Ü (Provider Cars)</h3>
        
        <div id="inventory-list" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Car items will be rendered here by JS -->
            <p class="text-center text-gray-500 py-10 sm:col-span-2 lg:col-span-3 xl:col-span-4">–¢“Ø—Ä —Ö“Ø–ª—ç—ç–Ω—ç “Ø“Ø, –º–∞—à–∏–Ω—ã –º—ç–¥—ç—ç–ª—ç–ª —Ç–∞—Ç–∞–∂ –±–∞–π–Ω–∞...</p>
        </div>
    </section>

    <!-- Sales Member System - The Opportunity (Unchanged) -->
    <section id="sales" class="py-16 px-4 md:py-24 max-w-7xl mx-auto">
        <h3 class="text-4xl font-bold text-center mb-12 text-white">üíº –ë–æ—Ä–ª—É—É–ª–∞–≥—á–∏–π–Ω –≠—Ä—Ö: –¢–∞–Ω—ã –ë–∏–∑–Ω–µ—Å</h3>
        
        <div class="grid md:grid-cols-2 gap-8">
            <!-- Left Card: Fee and Core Value -->
            <div class="card-bg p-8 rounded-2xl shadow-lg border border-gray-700 hover:border-blue-500 transition duration-500">
                <h4 class="text-2xl font-semibold text-blue-400 mb-4">‚Äú–¢–∞ –±–∏–∑–Ω–µ—Å–≥“Ø–π –±–∞–π—Å–∞–Ω —á –±–æ—Ä–ª—É—É–ª–∞–≥—á –±–∞–π–∂ –±–æ–ª–Ω–æ.‚Äù</h4>
                <p class="text-gray-400 mb-6">
                    –¢–∞ –∞–≤—Ç–æ–º–∞—à–∏–Ω —Ö—É–¥–∞–ª–¥–∞–∂ –∞–≤–∞—Ö, —Ç—ç—ç–≤—ç—Ä–ª—ç—Ö, –∑–∞—Å–≤–∞—Ä–ª–∞—Ö **–Ø–ú–ê–† –ß –≠–†–°–î–≠–õ–ì“Æ–ô**. –¢–∞–Ω—ã —Ö–∏–π—Ö –∑“Ø–π–ª –±–æ–ª –∑”©–≤—Ö”©–Ω: **–ë–û–†–õ–£–£–õ–ê–•**.
                </p>
                <div class="bg-gray-800 p-4 rounded-lg">
                    <p class="text-lg font-bold text-white">‚úÖ –≠–õ–°–≠–• –≠–†–•–ò–ô–ù –¢”®–õ–ë”®–† (–ñ–∏–ª–∏–π–Ω):</p>
                    <p class="text-4xl font-extrabold text-green-400 mt-1">‚ÇÆ250,000</p>
                </div>
            </div>

            <!-- Right Card: Tier System -->
            <div class="card-bg p-8 rounded-2xl shadow-lg border border-gray-700 hover:border-blue-500 transition duration-500">
                <h4 class="text-2xl font-semibold text-blue-400 mb-4">üìà Tier –£—Ä–∞–º—à—É—É–ª–ª—ã–Ω –°–∏—Å—Ç–µ–º</h4>
                <p class="text-gray-400 mb-6">–•—ç–¥–∏–π —á–∏–Ω—ç—ç –∏—Ö –º–∞—à–∏–Ω –∑–∞—Ä–Ω–∞ ‚Äî —Ç”©–¥–∏–π —á–∏–Ω—ç—ç –∞—à–∏–≥. –¢–∞–Ω—ã –∏–¥—ç–≤—Ö –Ω—ç–º—ç–≥–¥—ç—Ö —Ç—É—Å–∞–º –æ—Ä–ª–æ–≥—ã–Ω —Ö—É–≤—å —Ö—è–∑–≥–∞–∞—Ä–≥“Ø–π ”©—Å–Ω”©.</p>
                
                <div class="space-y-3">
                    <div class="p-4 bg-blue-900/30 rounded-lg flex justify-between items-center"><span class="font-bold text-xl text-white">Tier 1 (Starter)</span><span class="text-lg font-extrabold text-yellow-300">5% –ê—à–∏–≥</span></div>
                    <div class="p-4 bg-blue-900/50 rounded-lg flex justify-between items-center"><span class="font-bold text-xl text-white">Tier 2 (Pro)</span><span class="text-lg font-extrabold text-yellow-300">7% –ê—à–∏–≥</span></div>
                    <div class="p-4 bg-blue-900/70 rounded-lg flex justify-between items-center shadow-lg shadow-blue-500/30"><span class="font-bold text-xl text-white">Tier 3 (Elite)</span><span class="text-lg font-extrabold text-yellow-300">10% –ê—à–∏–≥</span></div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Commission Calculator - Interactive Element (Unchanged) -->
    <section id="calculator-section" class="py-16 px-4 md:py-24 max-w-4xl mx-auto">
        <h3 class="text-4xl font-bold text-center mb-12 text-white">üßÆ –û—Ä–ª–æ–≥–æ –¢–æ–æ—Ü–æ–æ–ª–æ—Ö</h3>
        
        <div class="card-bg p-8 rounded-2xl shadow-neon border border-blue-600">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div>
                    <label for="car-price" class="block text-sm font-medium text-gray-400 mb-2">–ú–∞—à–∏–Ω—ã “Ø–Ω—ç (‚ÇÆ)</label>
                    <input type="number" id="car-price" value="50000000" min="1000000" class="w-full p-3 rounded-lg bg-gray-800 border border-gray-600 text-white focus:border-blue-500" oninput="calculateCommission()">
                </div>
                <div>
                    <label for="tier-level" class="block text-sm font-medium text-gray-400 mb-2">–¢–∞–Ω—ã Tier –¢“Ø–≤—à–∏–Ω</label>
                    <select id="tier-level" class="w-full p-3 rounded-lg bg-gray-800 border border-gray-600 text-white focus:border-blue-500" onchange="calculateCommission()">
                        <option value="0.05">Tier 1 (5%)</option>
                        <option value="0.07">Tier 2 (7%)</option>
                        <option value="0.10">Tier 3 (10%)</option>
                    </select>
                </div>
                <div>
                    <label for="commission-rate" class="block text-sm font-medium text-gray-400 mb-2">–£—Ä–∞–º—à—É—É–ª–ª—ã–Ω —Ö—É–≤—å (%)</label>
                    <input type="text" id="commission-rate" value="5%" class="w-full p-3 rounded-lg bg-gray-800 border border-gray-600 text-white cursor-default" readonly>
                </div>
            </div>

            <div class="text-center bg-blue-900/50 p-6 rounded-xl">
                <p class="text-xl text-gray-300 mb-2">–¢–∞–Ω—ã –Ω—ç–≥ –±–æ—Ä–ª—É—É–ª–∞–ª—Ç–∞–∞—Å –æ–ª–æ—Ö —Ü—ç–≤—ç—Ä –æ—Ä–ª–æ–≥–æ:</p>
                <p id="commission-output" class="text-6xl font-extrabold text-yellow-300">‚ÇÆ2,500,000</p>
                <p class="text-gray-400 mt-2">"–•—è–∑–≥–∞–∞—Ä–≥“Ø–π" –∞–º–ª–∞–ª—Ç –Ω—å —Ç–∞–Ω—ã ”©–¥”©—Ä—Ç, —Å–∞—Ä–¥ —Ö–∏–π—Ö –±–æ—Ä–ª—É—É–ª–∞–ª—Ç—ã–Ω —Ç–æ–æ–Ω–æ–æ—Å —Ö–∞–º–∞–∞—Ä–Ω–∞.</p>
            </div>
        </div>
    </section>

    <!-- Provider/Supplier System - The Advantage (Unchanged) -->
    <section id="provider" class="py-16 px-4 md:py-24 max-w-7xl mx-auto bg-gray-900 border-t border-gray-700">
        <div class="grid md:grid-cols-2 gap-12 items-center">
            <div class="order-2 md:order-1">
                <h3 class="text-4xl font-bold text-white mb-6">üè≠ Provider / Supplier-–∏–π–Ω –°–∏—Å—Ç–µ–º</h3>
                <h4 class="text-3xl font-extrabold text-blue-400 mb-6">"–ë–æ—Ä–ª—É—É–ª–∞—Ö —Ö“Ø—á—ç—ç 1000 –¥–∞—Ö–∏–Ω ”©—Å–≥”©."</h4>
                <p class="text-gray-400 mb-6">
                    –¢–∞–Ω—ã (—á–µ–Ω–∂/–¥–∏–ª–ª–µ—Ä) –∞–≤—Ç–æ–º–∞—à–∏–Ω—ã –Ω”©”©—Ü –æ—Ä–æ–Ω –¥–∞—è–∞—Ä —Ç–∞—Ä—Ö—Å–∞–Ω 1000+ –∏–¥—ç–≤—Ö—Ç—ç–π sales member-—ç—ç—Ä –¥–∞–º–∂–∏–Ω –±–æ—Ä–ª—É—É–ª–∞–≥–¥–∞—Ö –±–æ–ª–æ–º–∂—Ç–æ–π –±–æ–ª–Ω–æ.
                </p>
                
                <div class="bg-gray-800 p-4 rounded-lg">
                    <p class="text-lg font-bold text-white">–¢”©–ª”©—Ö –®–∏–º—Ç–≥—ç–ª:</p>
                    <p class="text-3xl font-extrabold text-pink-400 mt-1">5% ‚Äì 10%</p>
                    <p class="text-xs text-gray-500 mt-2">
                        *–ó”©–≤—Ö”©–Ω –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö–∏–π–≥–¥—Å—ç–Ω –±–æ—Ä–ª—É—É–ª–∞–ª—Ç–∞–∞—Å —à–∏–º—Ç–≥—ç–ª –∞–≤–Ω–∞.
                    </p>
                </div>
            </div>
            <div class="order-1 md:order-2">
                <!-- Simple SVG Graphic to represent 1000x sales force -->
                <svg viewBox="0 0 100 100" class="w-full h-auto text-blue-500">
                    <defs>
                        <radialGradient id="grad1" cx="50%" cy="50%" r="50%">
                            <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#1e3a8a;stop-opacity:1" />
                        </radialGradient>
                    </defs>
                    <!-- Center Car (Provider) -->
                    <circle cx="50" cy="50" r="10" fill="url(#grad1)" stroke="#dbeafe" stroke-width="0.5"/>
                    <text x="50" y="52" text-anchor="middle" font-size="5" fill="#fff" font-weight="bold">SUPPLIER</text>
                    
                    <!-- Sales Members (12 dots) -->
                    <g fill="#60a5fa">
                        <circle cx="90" cy="50" r="2"/>
                        <circle cx="10" cy="50" r="2"/>
                        <circle cx="50" cy="10" r="2"/>
                        <circle cx="50" cy="90" r="2"/>
                        <circle cx="75" cy="25" r="2"/>
                        <circle cx="25" cy="75" r="2"/>
                        <circle cx="75" cy="75" r="2"/>
                        <circle cx="25" cy="25" r="2"/>
                        <!-- More dots for the illusion of 'many' -->
                        <circle cx="85" cy="65" r="2"/>
                        <circle cx="15" cy="35" r="2"/>
                        <circle cx="65" cy="85" r="2"/>
                        <circle cx="35" cy="15" r="2"/>
                    </g>
                    
                    <!-- Lines connecting Supplier to Sales Members -->
                    <g stroke="#3b82f6" stroke-width="0.3">
                        <line x1="50" y1="50" x2="90" y2="50"/>
                        <line x1="50" y1="50" x2="10" y2="50"/>
                        <line x1="50" y1="50" x2="50" y2="10"/>
                        <line x1="50" y1="50" x2="50" y2="90"/>
                        <line x1="50" y1="50" x2="75" y2="25"/>
                        <line x1="50" y1="50" x2="25" y2="75"/>
                        <line x1="50" y1="50" x2="75" y2="75"/>
                        <line x1="50" y1="50" x2="25" y2="25"/>
                        <!-- More lines -->
                        <line x1="50" y1="50" x2="85" y2="65"/>
                        <line x1="50" y1="50" x2="15" y2="35"/>
                        <line x1="50" y1="50" x2="65" y2="85"/>
                        <line x1="50" y1="50" x2="35" y2="15"/>
                    </g>
                    
                    <text x="50" y="40" text-anchor="middle" font-size="4" fill="#60a5fa">1000+ SALES FORCE</text>
                </svg>
            </div>
        </div>
    </section>


    <!-- Footer -->
    <footer class="bg-gray-800 border-t border-gray-700 mt-10 p-6">
        <div class="max-w-7xl mx-auto text-center text-sm text-gray-500">
            <p class="mb-2">¬© 2025 Car-–ê–≥—É—É–ª–∞—Ö. –ë“Ø—Ö —ç—Ä—Ö —Ö—É—É–ª–∏–∞—Ä —Ö–∞–º–≥–∞–∞–ª–∞–≥–¥—Å–∞–Ω. | Shared Economic System & Digital Revenue Platform.</p>
            <p id="firebase-status" class="text-sm text-yellow-500">–°–∏—Å—Ç–µ–º–∏–π–≥ –∞—á–∞–∞–ª–∂ –±–∞–π–Ω–∞...</p>
            <p id="user-id-display" class="text-xs mt-1"></p>
        </div>
    </footer>

    <!-- JavaScript for Commission Calculator -->
    <script>
        function calculateCommission() {
            const priceInput = document.getElementById('car-price');
            const tierSelect = document.getElementById('tier-level');
            const commissionRateDisplay = document.getElementById('commission-rate');
            const commissionOutput = document.getElementById('commission-output');

            let price = parseInt(priceInput.value.replace(/[^0-9]/g, ''));
            if (isNaN(price) || price < 0) {
                price = 0;
            }
            priceInput.value = price; 

            const rate = parseFloat(tierSelect.value);
            const ratePercent = (rate * 100).toFixed(0);
            commissionRateDisplay.value = `${ratePercent}%`;

            const commission = price * rate;

            commissionOutput.textContent = '‚ÇÆ' + commission.toLocaleString('en-US');

            commissionOutput.classList.remove('text-yellow-300', 'text-green-300', 'text-red-400');
            if (ratePercent == 5) {
                 commissionOutput.classList.add('text-yellow-300');
            } else if (ratePercent == 7) {
                commissionOutput.classList.add('text-green-300');
            } else if (ratePercent == 10) {
                commissionOutput.classList.add('text-red-400');
            }
        }
        document.addEventListener('DOMContentLoaded', calculateCommission);
    </script>
</body>
</html>
